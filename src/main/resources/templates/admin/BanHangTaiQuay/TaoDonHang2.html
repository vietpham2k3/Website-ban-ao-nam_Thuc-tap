<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" href="../../../static/assets/img/apple-icon.png">
    <link rel="icon" type="image/png" th:href="@{/static/images/shop.png}">
    <title>Bán Hàng Tại Quầy</title>
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"/>
    <!-- Nucleo Icons -->
    <link href="../../../static/assets/css/nucleo-icons.css" rel="stylesheet"/>
    <link href="../../../static/assets/css/nucleo-svg.css" rel="stylesheet"/>
    <!-- Font Awesome Icons -->
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    <link href="../../../static/assets/css/nucleo-svg.css" rel="stylesheet"/>
    <!-- CSS Files -->
    <link id="pagestyle" href="../../../static/assets/css/soft-ui-dashboard.css?v=1.0.7" rel="stylesheet"/>

    <!-- App css -->
    <script src="https://kit.fontawesome.com/52ef4965e2.js" crossorigin="anonymous"></script>

    <!-- Bootstrap 5 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css"
          integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">

    <!-- Nepcha Analytics (nepcha.com) -->
    <!-- Nepcha is a easy-to-use web analytics. No cookies and fully compliant with GDPR, CCPA and PECR. -->
    <script defer data-site="YOUR_DOMAIN_HERE" src="https://api.nepcha.com/js/nepcha-analytics.js"></script>
    <!-- App favicon -->

    <!-- App css -->
    <link href="../../static/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bootstrap-stylesheet">
    <link href="../../static/assets/css/icons.min.css" rel="stylesheet" type="text/css">
    <link href="../../static/assets/css/app.min.css" rel="stylesheet" type="text/css" id="app-stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="../../static/js/jquery.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

    <script src="https://kit.fontawesome.com/52ef4965e2.js" crossorigin="anonymous"></script>

    <style>
        [contenteditable] {
            border: solid 5px black;
            padding: 5px;
            border-radius: 4px;
        }
    </style>
</head>

<body>

<!-- Begin page -->

<div class="">
    <div class="row">
        <div class="col-md-12">

            <div class="col-md-2">

                <a class="btn" style="text-decoration: none;color: #000;"
                   data-toggle="tooltip" data-placement="left"
                   title="Trở về quản lý hóa đơn" th:href="@{/admin/hoa-don/hien-thi-page-search(MaHoaDon='', khachHang.TenKhachHang='',
                TongTienKhiGiam='', TrangThai='', tuNgay='', denNgay='', hinhThucThanhToan.TenHinhThuc='', xapXep='')}">
                    <i class="fa-solid fa-person-walking-arrow-loop-left fa-xl"></i>
                </a>

                <a class="btn" data-toggle="tooltip" data-placement="top" title="Quét mã QR"
                   style="text-decoration: none;color: #000;">
                    <i class="fa-solid fa-qrcode fa-xl"></i>
                </a>
            </div>


            <!-- Nav tabs -->
            <div class="col-md-10">

                <ul id="tab-list" class="nav nav-tabs" role="tablist">
                    <li class="active">
                        <a id="btn-add-tab" class="btn"
                           style="text-decoration: none;color: red;float: left;border: none;" data-toggle="tooltip"
                           data-placement="top" title="Thêm đơn hàng">
                            <i class="fa-solid fa-plus fa-beat-fade fa-xl"></i></a>
                        <a style="float: left" href="#tab1" role="tab" data-toggle="tab">
                            <span style="color: green;">Đơn 1</span>
                        </a>
                    </li>
                </ul>
            </div>
            <!-- Tab panes -->
            <div id="tab-content" class="tab-content">

                <div class="tab-pane fade in active" id="tab1">


                    <div class="">
                        <div class="row">
                            <div class="col-12">
                                <div class="card-box"
                                     style="display: flex;justify-content:center ;justify-items: center">
                                    <div style="height: 30px;margin-bottom: 30px" class="page-title-center">
                                        <h1 class="page-title" style="text-align: center; font-size: 200%">Sản Phẩm</h1>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Begin Dialog Voucher-->
                        <dialog id="myDialogVoucher" style="width: 900px;height: 600px;align-content: space-around">
                            <div class="title">
                                <h3>Tìm kiếm Khách Hàng</h3>
                            </div>
                            <div class="form-inline" style="margin-bottom: 30px">
                                <input type="text" th:name="ten" placeholder="Nhập tên sản phẩm"
                                       class="form-control form-control-sm"
                                       style="width: 150px; height: 40px; margin-right: 10px;"/>
                                <button type="submit" class="btn btn-success waves-effect waves-light">
                                    <span class="btn-label"><i class="mdi mdi-search-web"></i></span>
                                    Tìm Kiếm
                                </button>
                            </div>
                            <table id="datatable-buttonsss"
                                   class="table table-striped table-bordered dt-responsive nowrap dataTable no-footer dtr-inline"
                                   style="border-collapse: collapse; border-spacing: 0px; width: 100%;"
                                   role="grid" aria-describedby="datatable-buttons_info">
                                <thead class="text-center">
                                <tr>
                                    <th>Mã</th>
                                    <th>Tên</th>
                                    <th>Mức giảm</th>
                                    <th>Số tiền tối thiểu</th>
                                    <th>Ngày bắt đầu</th>
                                    <th>Ngày kết thúc</th>
                                    <th>Trạng thái</th>
                                    <th>Action</th>
                                </tr>
                                </thead>
                                <tbody>
                                <td class="text-center">

                                </td>

                                </tbody>
                            </table>
                            <button type="button" id="closeDialogButton3">Đóng</button>
                        </dialog>
                        <!--End Dialog Voucher-->

                        <!--Begin Dialog Khach Hang-->
                        <dialog id="myDialogKhachHang" style="width: 900px;height: 600px;align-content: space-around">
                            <div class="title">
                                <h3>Tìm kiếm Khách Hàng</h3>
                            </div>
                            <div class="form-inline" style="margin-bottom: 30px">
                                <input type="text" th:name="ten" placeholder="Nhập tên sản phẩm"
                                       class="form-control form-control-sm"
                                       style="width: 150px; height: 40px; margin-right: 10px;"/>
                                <button type="submit" class="btn btn-success waves-effect waves-light">
                                    <span class="btn-label"><i class="mdi mdi-search-web"></i></span>
                                    Tìm Kiếm
                                </button>
                            </div>
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Mã</th>
                                    <th>Tên</th>
                                    <th>SĐT</th>
                                    <th>Email</th>
                                    <th>Địa chỉ</th>
                                    <th>Ngày sinh</th>
                                    <!--                                                    <th>Vai trò</th>-->
                                    <th>Trạng thái</th>
                                    <th>Action</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>

                                </tr>
                                </tbody>
                            </table>
                            <button type="button" id="closeDialogButton2">Đóng</button>
                        </dialog>
                        <!--End Dialog Khach Hang-->

                        <!--Begin Dialog Sản Phẩm-->
                        <dialog id="myDialogSanPham" style="width: 900px;height: 600px;align-content: space-around">
                            <div class="title">
                                <h3>Tìm kiếm sản phẩm</h3>
                            </div>
                            <div class="form-inline" style="margin-bottom: 30px">
                                <input type="text" th:name="ten" placeholder="Nhập tên sản phẩm"
                                       class="form-control form-control-sm"
                                       style="width: 150px; height: 40px; margin-right: 10px;"/>
                                <button type="submit" class="btn btn-success waves-effect waves-light">
                                    <span class="btn-label"><i class="mdi mdi-search-web"></i></span>
                                    Tìm Kiếm
                                </button>
                            </div>
                            <table id="datatable-buttonss"
                                   class="table table-striped table-bordered dt-responsive nowrap dataTable no-footer dtr-inline"
                                   style="border-collapse: collapse; border-spacing: 0px; width: 100%;"
                                   role="grid" aria-describedby="datatable-buttons_info">
                                <thead class="text-center">
                                <tr>
                                    <th scope="row">STT</th>
                                    <th>Ảnh</th>
                                    <th>Tên Sản Phẩm</th>
                                    <th>Giá</th>
                                    <th>Trạng thái</th>
                                    <th>Số lượng</th>
                                    <th>Action</th>
                                </tr>
                                </thead>
                                <tbody>

                                <tr>

                                </tr>
                                </tbody>
                            </table>
                            <button type="button" id="closeDialogButton1">Đóng</button>
                        </dialog>

                        <div class="row">
                            <div class="col-12">
                                <div class="card-box" style="display: flex;justify-content:center ">
                                    <div class="col-xl-8">
                                        <form>
                                            <div class="form-inline mt-3" style="display: flex">
                                                <button type="submit" class="btn btn-success waves-effect waves-light">
                                                    <span class="btn-label"><i class="mdi mdi-search-web"></i></span>
                                                    Tìm Kiếm
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="col-xl-4">
                                        <div class="dataTables_filter" style="padding-top: 17px">
                                            <button id="openDialogButtonSanPham"
                                                    class="btn btn-success waves-effect waves-light"
                                                    style="float: right; margin-left: 10px">
                                                <i class="mdi mdi-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-12">
                                <div class="card-box">
                                    <!-- Begin table Giỏ hàng -->
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <table id="datatable-buttons"
                                                   class="table table-striped table-bordered dt-responsive nowrap dataTable no-footer dtr-inline"
                                                   style="border-collapse: collapse; border-spacing: 0px; width: 100%;"
                                                   role="grid" aria-describedby="datatable-buttons_info">
                                                <thead class="text-center">
                                                <tr>
                                                    <th scope="row">Ảnh</th>
                                                    <th>Sản Phẩm</th>
                                                    <th>Số lượng</th>
                                                    <th>Giá</th>
                                                    <th>Thao Tác</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr class="text-center">

                                                </tr>
                                                <!--                                                            <tr th:if="${listhdct.size() == 0}">-->
                                                <!--                                                                <div style="" class="col-sm-12">-->
                                                <!--                                                                    <td colspan="10"-->
                                                <!--                                                                        style="text-align: center;pointer-events:none;">-->
                                                <!--                                                                        <div class="alert fade alert-simple alert-danger alert-dismissible text-left font__family-montserrat font__size-28 font__weight-light brk-library-rendered rendered show"-->
                                                <!--                                                                             role="alert"-->
                                                <!--                                                                             data-brk-library="component__alert">-->

                                                <!--                                                                            <div class="start-icon far fa-times-circle faa-pulse animated fa-times">-->
                                                <!--                                                                                <strong style="font-family: Arial"-->
                                                <!--                                                                                        class="font__weight-semibold ">Không-->
                                                <!--                                                                                    có dữ liệu !</strong></div>-->
                                                <!--                                                                        </div>-->
                                                <!--                                                                    </td>-->
                                                <!--                                                                </div>-->
                                                <!--                                                            </tr>-->
                                                </tbody>
                                            </table>
                                            <!--                                                        <label style="float: right; width: 150px; display: flex"><p>Tổng Số tiền: </p><p th:text="${TongTien}"></p> đ</label>-->
                                        </div>
                                    </div>
                                    <!-- End table Giỏ hàng -->


                                </div>
                            </div>
                        </div>


                        <div class="row">
                            <!-- Cột trái - Tài Khoản -->
                            <div class="col-md-4">
                                <div style="" class="card-box">
                                    <!-- Nội dung của Tài Khoản -->

                                    <div class="row">
                                        <div class="col-12">
                                            <div class="card-box">
                                                <!-- Begin Tài Khoản-->
                                                <div style="height: 360px;" class="row">
                                                    <div class="col-sm-12"
                                                         style="display: flex;border-bottom: 1px solid #495057;height: 80px;">
                                                        <h2 style="width: 200px;display: flex;justify-content: start">
                                                            Tài khoản</h2>
                                                        <div style=" text-align: right; margin-left: auto; margin-top: auto; margin-bottom: auto;">
                                                            <button id="openDialogButtonKhachHang"
                                                                    class="btn btn-success waves-effect waves-light"
                                                                    style="float: right; margin-left: 10px">
                                                                <i class="mdi mdi-plus"></i>
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-12">
                                                        <h6 style="width: 200px">Tên khách hàng: </h6>

                                                        <br>
                                                        <h6 style="width: 200px">Tên Tài Khoản: </h6> <br>
                                                        <h6 style="width: 200px">Email: </h6>
                                                        <br>
                                                    </div>

                                                </div>
                                                <!-- End Tài Khoản -->
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- Cột phải - Khách Hàng -->
                            <div class="col-md-8">
                                <div class="card-box">
                                    <!-- Nội dung của Khách Hàng -->
                                    <!-- Begin Khách Hàng-->
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="card-box">

                                                <div style="height: 360px;" class="row">
                                                    <div class="col-sm-12"
                                                         style="display: flex;border-bottom: 1px solid #495057">
                                                        <h2 style="width: 200px">Khách hàng</h2>
                                                        <form action="" method="get"
                                                              style="width: 500px; text-align: right; margin-left: auto; margin-top: auto; margin-bottom: auto;">
                                                            <button type="submit"
                                                                    class="btn btn-success waves-effect waves-light">
                                                                Chọn địa chỉ
                                                            </button>
                                                        </form>
                                                    </div>

                                                    <div class="col-sm-12">
                                                        <!--Phần row chia thông tin khách hàng -->
                                                        <div class="row">
                                                            <div class="col-7">
                                                            </div>
                                                            <div class="col-5"
                                                                 style="align-content: space-around; display: flex; flex-direction: column; gap: 10px;">
                                                                <label><h4>Thông tin Thanh toán</h4></label>
                                                                <div class="custom-control custom-switch">
                                                                    <input type="checkbox" class="custom-control-input"
                                                                           id="customSwitches">
                                                                    <label class="custom-control-label"
                                                                           for="customSwitches">Giao
                                                                        Hàng</label>
                                                                </div>
                                                                <div class="form-inline">
                                                                    <input type="text" class="form-control"
                                                                           placeholder="Mã Giảm Giá">
                                                                    <button id="openDialogButtonVoucher" type="submit"
                                                                            class="btn btn-primary"><i
                                                                            class="mdi mdi-plus"></i>
                                                                    </button>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-6">
                                                                        <!--                                                                                    <h6 style="width: 200px">Tiền Hàng <p th:text="${TongTien}"></p></h6>-->
                                                                        <!--                                                                                    <h6 style="width: 200px">Giảm giá <p th:text="${TongTienMucGiam}"></p></h6>-->
                                                                        <!--                                                                                    <h4 style="width: 200px">Tổng số tiền <p th:text="${tongTienSauGiam}"></p></h4>-->
                                                                    </div>
                                                                </div>
                                                                <!--                                                                            <form th:action="@{/ban-hang-tai-quay/view-hoa-don/{id}(id=${id})}" method="get"-->
                                                                <!--                                                                                  style="margin-left: auto; margin-top: auto; margin-bottom: auto;">-->
                                                                <!--                                                                                <button type="submit" class="btn btn-success waves-effect waves-light">-->
                                                                <!--                                                                                    Xác nhận-->
                                                                <!--                                                                                </button>-->
                                                                <!--                                                                            </form>-->
                                                            </div>

                                                        </div>
                                                        <!--End Phần row chia thông tin khách hàng -->
                                                    </div>

                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <!-- End Khách Hàng -->

                                </div>
                            </div>
                        </div>


                    </div>


                </div>
            </div>


        </div>

    </div>
</div>

<!-- Modal -->
<div id="exceedModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Giới hạn đơn!!!</h4>
            </div>
            <div class="modal-body">
                <p>Bạn chỉ có thể tạo tối đa 8 đơn hàng !</p>
            </div>
            <div class="modal-footer">
                <button type="button" style="background-color: red;" class="btn btn-default" data-dismiss="modal">
                    <i style="color: white;" class="fa-solid fa-xmark fa-lg">
                    </i></button>
            </div>
        </div>
    </div>
</div>

<script>

    const openDialogButtonSanPham = document.getElementById('openDialogButtonSanPham');
    const myDialogSanPham = document.getElementById('myDialogSanPham');
    const closeDialogButton1 = document.getElementById('closeDialogButton1');
    openDialogButtonSanPham.addEventListener('click', () => {
        myDialogSanPham.showModal();
    });
    closeDialogButton1.addEventListener('click', () => {
        myDialogSanPham.close();
    });

    const openDialogButtonKhachHang = document.getElementById('openDialogButtonKhachHang');
    const myDialogKhachHang = document.getElementById('myDialogKhachHang');
    const closeDialogButton2 = document.getElementById('closeDialogButton2');
    openDialogButtonKhachHang.addEventListener('click', () => {
        myDialogKhachHang.showModal();
    });
    closeDialogButton2.addEventListener('click', () => {
        myDialogKhachHang.close();
    });

    const openDialogButtonVoucher = document.getElementById('openDialogButtonVoucher');
    const myDialogVoucher = document.getElementById('myDialogVoucher');
    const closeDialogButton3 = document.getElementById('closeDialogButton3');
    openDialogButtonVoucher.addEventListener('click', () => {
        myDialogVoucher.showModal();
    });
    closeDialogButton3.addEventListener('click', () => {
        myDialogVoucher.close();
    });

    $(document).ready(function () {
        const openDialogButtonSanPham = document.getElementById('openDialogButtonSanPham');
        const myDialogSanPham = document.getElementById('myDialogSanPham');
        const openDialogButtonKhachHang = document.getElementById('openDialogButtonKhachHang');
        const myDialogKhachHang = document.getElementById('myDialogKhachHang');
        const openDialogButtonVoucher = document.getElementById('openDialogButtonVoucher');
        const myDialogVoucher = document.getElementById('myDialogVoucher');
        const tableBody1 = myDialogSanPham.querySelector('tbody1');
        const tableBody2 = myDialogKhachHang.querySelector('tbody2');
        const tableBody3 = myDialogVoucher.querySelector('tbody3');

        openDialogButtonSanPham.addEventListener('click', () => {
            // Gọi Ajax để tải dữ liệu
            $.ajax({
                url: '/ban-hang-tai-quay/viewcart', // Đường dẫn tới API hoặc trang tải dữ liệu
                method: 'GET',
                success: function (data) {
                    // Cập nhật bảng trong hộp thoại với dữ liệu mới
                    tableBody1.innerHTML = data;

                    // Hiển thị hộp thoại
                    myDialogSanPham.showModal();
                },
                error: function (error) {
                    console.error(error);
                }
            });
        });

        openDialogButtonKhachHang.addEventListener('click', () => {
            // Gọi Ajax để tải dữ liệu
            $.ajax({
                url: '/ban-hang-tai-quay/viewcart', // Đường dẫn tới API hoặc trang tải dữ liệu
                method: 'GET',
                success: function (data) {
                    // Cập nhật bảng trong hộp thoại với dữ liệu mới
                    tableBody2.innerHTML = data;

                    // Hiển thị hộp thoại
                    myDialogKhachHang.showModal();
                },
                error: function (error) {
                    console.error(error);
                }
            });
        });

        openDialogButtonVoucher.addEventListener('click', () => {
            // Gọi Ajax để tải dữ liệu
            $.ajax({
                url: '/ban-hang-tai-quay/viewcart', // Đường dẫn tới API hoặc trang tải dữ liệu
                method: 'GET',
                success: function (data) {
                    // Cập nhật bảng trong hộp thoại với dữ liệu mới
                    tableBody3.innerHTML = data;

                    // Hiển thị hộp thoại
                    myDialogVoucher.showModal();
                },
                error: function (error) {
                    console.error(error);
                }
            });
        });

        // Đóng hộp thoại khi nhấp nút Đóng
        const closeDialogButton1 = document.getElementById('closeDialogButton1');
        closeDialogButton1.addEventListener('click', () => {
            myDialogSanPham.close();
        });

        const closeDialogButton2 = document.getElementById('closeDialogButton2');
        closeDialogButton2.addEventListener('click', () => {
            myDialogKhachHang.close();
        });
        const closeDialogButton3 = document.getElementById('closeDialogButton3');
        closeDialogButton3.addEventListener('click', () => {
            myDialogVoucher.close();
        });
    });


</script>


<!-- Vendor js -->
<script src="../../static/assets/js/vendor.min.js"></script>
<!--Morris Chart-->
<script src="../../static/assets/libs/morris-js/morris.min.js"></script>
<script src="../../static/assets/libs/raphael/raphael.min.js"></script>

<!-- Dashboard init js-->
<script src="../../static/assets/js/pages/dashboard.init.js"></script>

<!-- App js -->
<script src="../../static/assets/js/app.min.js"></script>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    var button = '<button class="close" type="button" title="Remove this page">×</button>';
    var tabID = 1;

    function resetTab() {
        var tabs = $("#tab-list li:not(:first)");
        var len = 1;
        $(tabs).each(function (k, v) {
            len++;
            $(this).find('a').html('Tab ' + len + button);
        });
        tabID--;
    }

    $(document).ready(function () {
        $('#btn-add-tab').click(function () {
            if (tabID >= 8) {
                $('#exceedModal').modal('show');
                return;
            }
            tabID++;
            $('#tab-list').append($('<li><a style="color:green" href="#tab' + tabID + '" role="tab" data-toggle="tab">' +
                '<span>Đơn ' + tabID + '</span> <button class="close" type="button" title="Remove this page">×</button></a></li>'));
            $('#tab-content').append($('<div class="tab-pane fade" id="tab' + tabID + '">Đơn ' + tabID + ' content</div>'));
            $(".edit").click(editHandler);
        });

        $('#tab-list').on('click', '.close', function () {
            var tabID = $(this).parents('a').attr('href');
            $(this).parents('li').remove();
            $(tabID).remove();

            // Show the first tab
            var tabFirst = $('#tab-list a:first');
            resetTab();
            tabFirst.tab('show');
        });
    });

    var editHandler = function () {
        var t = $(this);
        t.css("visibility", "hidden");
        $(this).prev().attr("contenteditable", "true").focusout(function () {
            $(this).removeAttr("contenteditable").off("focusout");
            t.css("visibility", "visible");
        });
    };

    $(".edit").click(editHandler);
</script>

</body>
</html>
